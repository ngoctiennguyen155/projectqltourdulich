@model IEnumerable<projecttour.Controllers.tour_nguoidiController.thongke>

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="card w-100">
    <div class="card-header">
        <div class="row">
            <div class="col-md-6 text-danger text-uppercase">
                <strong>Danh sách Giá Tour</strong>
            </div>
            <div class="col-md-6 text-right">
                <a href="@Url.Action("Index")" class="btn btn-sm btn-danger" data-toggle="tooltip" title="Thoát">
                    <span class="fa fa-reply"></span>
                </a>
            </div>
        </div>
    </div>
    <div class="card-block p-3">
        @using (Html.BeginForm("Chitiet", "tour_nguoidi", FormMethod.Post))
        {
            <p>ViewBag.choose</p>
            <div class="form-inline">
                @* <p>@ViewBag.choose</p>*@
                <label class="mr-3">Chọn tour: </label>
                <select class="form-control mr-3" name="selectedValue">

                    <option selected value="0">Select tour</option>
                    @{
                        foreach (var e in ViewBag.listTour)
                        {
                            <option selected value="@e.tour_id">@e.tour_ten</option>
                        }
                    }

                </select>

                <button class="btn btn-sm btn-success mr-3">Xem</button>
            </div>
        }
        <table class="table table-bordered table-hover table-striped w-100 mt-3">
            <tr>
                <th>#</th>
                <th>Đoàn đi</th>
                <th>Số khách</th>
                <th>Giá tour</th>
                <th>Doanh thu</th>
                <th>Tổng chi phí</th>
                <th>Lãi</th>
            </tr>
            @{
                    int i = 1;
                    int tdt = 0;
                    int tcp = 0;
                    foreach (var e in Model)
                    {
                        int zz = e.tongdanhthu - e.tongchiphi;
                        tdt += e.tongdanhthu;
                        tcp += e.tongchiphi;
                        <tr>
                            <td>@i</td>
                            <td>@e.tour</td>
                            <td>@e.sokhach</td>
                            <td>@e.giatour</td>
                            <td>@e.tongdanhthu | <a href="https://localhost:44341/tour_doan/Details/@e.idtour" >Chi tiết</a></td>
                            <td>@e.tongchiphi | <a href="https://localhost:44341/tour_doan/Chiphi/@e.idtour">Chi tiết</a></td>
                            <td>@zz</td>

                        </tr>
                        i = i + 1;
                    }
                    int lai = tdt - tcp;
                }
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>Tổng</td>
                    <td>@tdt</td>
                    <td>@tcp</td>
                    <td>@lai</td>

                </tr>

        </table>
    </div>
</div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
